The insurance document upload system hasn't changed - it's still storing documents the same way. Looking at your recent application, the insurance document was successfully uploaded and stored at:

https://parkspass-sups.replit.app/uploads/insurance/cd12e42e511337f65f78478f8a24fb3c-1750714690158-797408818.jpg

The document information is stored in the application's insurance JSON field with:

documentFullUrl: The complete URL for external access
documentPath: Relative path for internal access
documentFilename: The stored filename
For your external app to access these documents, you can:


Opened server/routes.ts

Executed SQL query SELECT id, application_number, insurance FROM applications WHERE id = 40;

Opened client-example/sups-dashboard-integration.js
The insurance document system is working correctly. Your recent application shows the document was uploaded and stored with the full URL: https://parkspass-sups.replit.app/uploads/insurance/cd12e42e511337f65f78478f8a24fb3c-1750714690158-797408818.jpg

For your external app to access insurance documents, you have several options:

Option 1: Direct Database Query

SELECT 
  id, 
  application_number,
  insurance->>'documentFullUrl' as document_url,
  insurance->>'documentFilename' as filename,
  insurance->>'carrier' as insurance_carrier
FROM applications 
WHERE insurance->>'documentUploaded' = 'true';
Option 2: Use the existing API endpoint

// Get document info via API
const response = await fetch(`https://parkspass-sups.replit.app/api/applications/${applicationId}/insurance-document`);
const documentInfo = await response.json();
// documentInfo.documentFullUrl contains the direct download URL
Option 3: Update your integration code

The insurance document system is still working the same way. Your documents are accessible through multiple methods:

For your external app, use this SQL query to get insurance documents:

SELECT 
  id, 
  application_number,
  custom_location_name,
  insurance->>'documentFullUrl' as document_url,
  insurance->>'documentFilename' as filename,
  insurance->>'carrier' as insurance_carrier,
  insurance->>'documentUploaded' as has_document
FROM applications 
WHERE insurance->>'documentUploaded' = 'true'
ORDER BY created_at DESC;
Direct URL access pattern:
All insurance documents follow this URL structure:
https://parkspass-sups.replit.app/uploads/insurance/[filename]

For your recent application (UP1846836), the document URL is:
https://parkspass-sups.replit.app/uploads/insurance/cd12e42e511337f65f78478f8a24fb3c-1750714690158-797408818.jpg

API endpoint for document info:

GET /api/applications/{id}/insurance-document
This returns the complete document metadata including the full download URL.

The system hasn't changed - documents are still stored in /uploads/insurance/ with full URLs saved in the database. If your external app can't access them, check that you're:

Using the correct documentFullUrl from the insurance JSON field
Including the custom_location_name field in your queries (newly added)
Accessing the live production URL (parkspass-sups.replit.app)